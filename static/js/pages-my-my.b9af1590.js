(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-my"],{"0289":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,".container[data-v-4143611d]{padding-bottom:%?40?%}.profile-card[data-v-4143611d], .form-card[data-v-4143611d]{background:#fff;padding:%?30?%;border-radius:%?10?%;text-align:center}.welcome-text[data-v-4143611d]{font-size:%?36?%;display:block;margin-bottom:%?40?%}.logout-btn[data-v-4143611d]{background-color:#f44336;color:#fff;margin:%?40?% %?20?% 0}.form-input[data-v-4143611d]{border:1px solid #eee;padding:%?15?%;margin-bottom:%?20?%;text-align:left}.submit-btn[data-v-4143611d]{background-color:#007aff;color:#fff;margin-bottom:%?20?%}.switch-text[data-v-4143611d]{color:#007aff;font-size:%?28?%}.menu-list[data-v-4143611d]{margin:%?20?%;background:#fff;border-radius:%?10?%}.menu-item[data-v-4143611d]{display:flex;align-items:center;padding:%?25?%;border-bottom:1px solid #eee}.menu-item[data-v-4143611d]:last-child{border-bottom:none}.menu-icon[data-v-4143611d]{width:%?40?%;height:%?40?%;margin-right:%?20?%}.menu-text[data-v-4143611d]{flex:1}.arrow[data-v-4143611d]{color:#ccc}",""]),t.exports=e},"4e03":function(t,e,n){"use strict";n("6a54");var a=n("3639").default,i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c223");var o=i(n("2634")),s=i(n("2fdc")),r=i(n("9b1b")),u=a(n("9064")),c=n("8f59"),l={data:function(){return{isLoginView:!0,loginForm:{studentId:"",password:""},registerForm:{studentId:"",nickname:"",password:""}}},computed:(0,r.default)({},(0,c.mapState)(["token","userInfo"])),methods:(0,r.default)((0,r.default)({},(0,c.mapMutations)(["LOGIN","LOGOUT"])),{},{goToList:function(t){uni.navigateTo({url:"/pages/".concat(t,"/").concat(t)})},handleLogin:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var n;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.default)({url:"/auth/login",method:"POST",data:t.loginForm});case 3:n=e.sent,t.LOGIN({token:n.accessToken,userInfo:{id:n.id,nickname:n.nickname}}),uni.showToast({title:"登录成功"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),uni.showToast({title:"登录失败，请检查学号或密码",icon:"none"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},handleRegister:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.default)({url:"/auth/register",method:"POST",data:t.registerForm});case 3:uni.showToast({title:"注册成功，请登录"}),t.isLoginView=!0,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),uni.showToast({title:"注册失败，学号可能已被使用",icon:"none"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},logout:function(){this.LOGOUT(),uni.showToast({title:"已退出登录"})}})};e.default=l},6495:function(t,e,n){"use strict";n.r(e);var a=n("eee0"),i=n("7d34");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("bb72");var s=n("828b"),r=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"4143611d",null,!1,a["a"],void 0);e["default"]=r.exports},"7d34":function(t,e,n){"use strict";n.r(e);var a=n("4e03"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},a58b:function(t,e,n){var a=n("0289");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("3512bccf",a,!0,{sourceMap:!1,shadowMode:!1})},bb72:function(t,e,n){"use strict";var a=n("a58b"),i=n.n(a);i.a},eee0:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[t.token?n("v-uni-view",[n("v-uni-view",{staticClass:"profile-card"},[n("v-uni-text",{staticClass:"welcome-text"},[t._v("欢迎, "+t._s(t.userInfo.nickname))])],1),n("v-uni-view",{staticClass:"menu-list"},[n("v-uni-view",{staticClass:"menu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToList("publications")}}},[n("v-uni-image",{staticClass:"menu-icon",attrs:{src:"/static/publish_list.png"}}),n("v-uni-text",{staticClass:"menu-text"},[t._v("我的发布")]),n("v-uni-text",{staticClass:"arrow"},[t._v(">")])],1),n("v-uni-view",{staticClass:"menu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToList("favorites")}}},[n("v-uni-image",{staticClass:"menu-icon",attrs:{src:"/static/favorite.png"}}),n("v-uni-text",{staticClass:"menu-text"},[t._v("我的收藏")]),n("v-uni-text",{staticClass:"arrow"},[t._v(">")])],1)],1),n("v-uni-button",{staticClass:"logout-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout.apply(void 0,arguments)}}},[t._v("退出登录")])],1):n("v-uni-view",{staticClass:"form-card"},[t.isLoginView?n("v-uni-view",[n("v-uni-input",{staticClass:"form-input",attrs:{placeholder:"学号"},model:{value:t.loginForm.studentId,callback:function(e){t.$set(t.loginForm,"studentId",e)},expression:"loginForm.studentId"}}),n("v-uni-input",{staticClass:"form-input",attrs:{type:"password",placeholder:"密码"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),n("v-uni-button",{staticClass:"submit-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleLogin.apply(void 0,arguments)}}},[t._v("登录")]),n("v-uni-text",{staticClass:"switch-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isLoginView=!1}}},[t._v("没有账号？去注册")])],1):n("v-uni-view",[n("v-uni-input",{staticClass:"form-input",attrs:{placeholder:"学号"},model:{value:t.registerForm.studentId,callback:function(e){t.$set(t.registerForm,"studentId",e)},expression:"registerForm.studentId"}}),n("v-uni-input",{staticClass:"form-input",attrs:{placeholder:"昵称"},model:{value:t.registerForm.nickname,callback:function(e){t.$set(t.registerForm,"nickname",e)},expression:"registerForm.nickname"}}),n("v-uni-input",{staticClass:"form-input",attrs:{type:"password",placeholder:"密码"},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}}),n("v-uni-button",{staticClass:"submit-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleRegister.apply(void 0,arguments)}}},[t._v("注册")]),n("v-uni-text",{staticClass:"switch-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isLoginView=!0}}},[t._v("已有账号？去登录")])],1)],1)],1)},i=[]}}]);