(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"69fa":function(n,t,e){var a=e("80dc");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var c=e("967d").default;c("f1d39dc0",a,!0,{sourceMap:!1,shadowMode:!1})},"80dc":function(n,t,e){var a=e("c86c");t=a(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 简单样式 */.search-bar[data-v-1fac748c]{border:1px solid #ccc;padding:%?10?%;margin:%?20?%;border-radius:%?30?%;background:#fff}.product-list[data-v-1fac748c]{padding:0 %?20?%}.product-item[data-v-1fac748c]{display:flex;padding:%?20?%;margin-bottom:%?20?%;background:#fff;border-radius:%?10?%}.product-image[data-v-1fac748c]{width:%?150?%;height:%?150?%;margin-right:%?20?%;border-radius:%?10?%}.product-info[data-v-1fac748c]{display:flex;flex-direction:column;justify-content:space-between}.product-price[data-v-1fac748c]{color:red;margin-top:%?10?%;font-weight:700}\n/* 空状态样式 */.empty-container[data-v-1fac748c]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:%?200?%;color:#999}.empty-image[data-v-1fac748c]{width:%?200?%;height:%?200?%;margin-bottom:%?20?%}",""]),n.exports=t},"84fc":function(n,t,e){"use strict";e("6a54");var a=e("3639").default,c=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("c223");var i=c(e("2634")),r=c(e("2fdc")),o=c(e("9b1b")),s=a(e("9064")),u=e("8f59"),d={data:function(){return{products:[],searchValue:"",isFirstLoad:!0}},computed:(0,o.default)({},(0,u.mapState)(["homeNeedsRefresh"])),onLoad:function(){this.fetchProducts()},onShow:function(){this.homeNeedsRefresh&&(console.log("Home page needs refresh! Fetching data..."),this.fetchProducts(),this.SET_HOME_NEEDS_REFRESH(!1))},onPullDownRefresh:function(){this.searchValue="",this.fetchProducts().then((function(){uni.stopPullDownRefresh()}))},methods:(0,o.default)((0,o.default)({},(0,u.mapMutations)(["SET_HOME_NEEDS_REFRESH"])),{},{fetchProducts:function(){var n=arguments,t=this;return(0,r.default)((0,i.default)().mark((function e(){var a,c;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:"",t.isFirstLoad||uni.showNavigationBarLoading(),e.prev=2,e.next=5,(0,s.default)({url:"/products?search=".concat(a),method:"GET"});case 5:c=e.sent,t.products=c,console.log(t.products),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error(e.t0),t.products=[];case 14:return e.prev=14,t.isFirstLoad=!1,uni.hideNavigationBarLoading(),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[2,10,14,18]])})))()},onSearch:function(n){this.fetchProducts(n.detail.value)},goToDetail:function(n){uni.navigateTo({url:"/pages/detail/detail?id=".concat(n)})},getProductImageUrl:function(n){return"".concat(s.BASE_URL,"/products/").concat(n,"/image?t=").concat((new Date).getTime())}})};t.default=d},"88f1":function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return c})),e.d(t,"a",(function(){}));var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"content"},[e("v-uni-input",{staticClass:"search-bar",attrs:{placeholder:"搜索商品标题"},on:{confirm:function(t){arguments[0]=t=n.$handleEvent(t),n.onSearch.apply(void 0,arguments)}},model:{value:n.searchValue,callback:function(t){n.searchValue=t},expression:"searchValue"}}),n.isFirstLoad?e("v-uni-view",{staticClass:"empty-container"},[e("v-uni-text",[n._v("正在加载中...")])],1):n.products.length>0?e("v-uni-view",{staticClass:"product-list"},n._l(n.products,(function(t){return e("v-uni-view",{key:t._id,staticClass:"product-item",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.goToDetail(t._id)}}},[e("v-uni-image",{staticClass:"product-image",attrs:{src:n.getProductImageUrl(t._id)}}),e("v-uni-view",{staticClass:"product-info"},[e("v-uni-text",{staticClass:"product-title"},[n._v(n._s(t.title))]),e("v-uni-text",{staticClass:"product-price"},[n._v("¥"+n._s(t.price))])],1)],1)})),1):e("v-uni-view",{staticClass:"empty-container"},[e("v-uni-image",{staticClass:"empty-image",attrs:{src:"/static/empty.png"}}),e("v-uni-text",{staticClass:"empty-text"},[n._v("市场空空如也，快来发布你的第一件商品吧！")])],1)],1)},c=[]},"9a12":function(n,t,e){"use strict";e.r(t);var a=e("88f1"),c=e("9d7f");for(var i in c)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return c[n]}))}(i);e("c168");var r=e("828b"),o=Object(r["a"])(c["default"],a["b"],a["c"],!1,null,"1fac748c",null,!1,a["a"],void 0);t["default"]=o.exports},"9d7f":function(n,t,e){"use strict";e.r(t);var a=e("84fc"),c=e.n(a);for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(i);t["default"]=c.a},c168:function(n,t,e){"use strict";var a=e("69fa"),c=e.n(a);c.a}}]);